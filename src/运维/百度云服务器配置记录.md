# 百度智能云服务器 笔记

```yml
百度云账号：166666666666666667
  密码 **********
  ssh
  服务器地址:106.12.160.27
  服务器域名:z****************be.top
  用户名:root
密码: ****************
```

[主页地址链接](https://cloud.baidu.com/?from=console)  
[活动链接](http://mke.cn/1gc0)

```yml
mysql:
  root:
    username:root
    password:****************
redis:
  usernam:root
  password:****************


域名登录账号: **********.top
                密码：****************
```

1.检查操作系统
查看linux版本是centos还是redhat

```cmd
cat /etc/redhat-release
```

则会出现具体系统

```markdown
Red Hat Enterprise Linux AS release 4 (Nahant Update 8)
Kernel /r on an /m 或
CentOS release 7.8 (Final)
```

查看linux系统是64位还是32位

```cmd
getconf LONG_BIT 
```

上传本地的 jdk

```shell
tar -zxvf /root/jdk-8u161-linux-x64.tar.gz -C ./
```

# 编辑配置文件并使其生效

```shell
vim /etc/profile
```

```
JAVA_HOME=/root/java/jdk1.8.0_321
CLASSPATH=$JAVA_HOME/lib/
PATH=$PATH:$JAVA_HOME/bin
export PATH JAVA_HOME CLASSPATH

```

* 使配置生效

```shell
source /etc/profile
```

## 安装 mysql

* 参考地址 [https://www.cnblogs.com/easyidea/p/13846258.html](https://www.cnblogs.com/easyidea/p/13846258.html)
* 因为使用的是centos 8 以上的版本 所以 执行 命令来安装 mysql
* 服务器版本信息 ：CentOS Linux release 8.4.2105

```shell
dnf install @mysql

```

2、安装完成使用下面命令启动MySQL服务

```
systemctl enable --now mysqld
```

3、查看服务是否启动（执行下面命令出现 active (running) 那么就说明已经启动了）

```
systemctl status mysqld
```

4、检查是否已经设置为开机启动MySQL服务（执行之后显示 disabled:不自启动，enabled:自动启动）

```
 #设置开机启动
 systemctl list-unit-files|grep mysqld  

 #设置开机启动（如果是enabled就不用执行了）
 systemctl enable mysqld.service
```

5、设置数据库安全设置：会执行几个设置：

```
mysql_secure_installation

 

Enter password for user root: 

--为root用户设置密码

 

Do you wish to continue with the password provided?(Press y|Y for Yes, any other key for No) :y

 --您想继续使用提供的密码吗？（按y | y表示是，按其他键表示否）：

 

Remove anonymous users? (Press y|Y for Yes, any other key for No) : y

--删除匿名账号 （y）

 

Disallow root login remotely? (Press y|Y for Yes, any other key for No) : n

--取消root用户远程登录  (n)


Remove test database and access to it? (Press y|Y for Yes, any other key for No) : y

--删除test库和对test库的访问权限 (y)

 

 

Reload privilege tables now? (Press y|Y for Yes, any other key for No) : y

--刷新授权表使修改生效  (y)

 

如果出现 Estimated strength of the password：25  那么说明密码强度不够：可以按 Ctrl+C退出设置。

```

6、进入mysql

```
mysql

 如果出现 ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)
```

```
mysql -uroot -p你刚才输入的密码

```

7、设置MYSQL密码 123456

```
ALTER USER 'root'@'localhost' IDENTIFIED BY '123456';
```

如果出现 ERROR 1819 (HY000): Your password does not satisfy the current policy requirements 说明你的密码太简短了。

修改密码长度为：4    (设置完成再去设置密码就OK了)

修改密码长度：

```
set global validate_password.length=4;
```

修改密码规则：

```
set global validate_password.policy=LOW;
```

先查看密码规则

```
SHOW VARIABLES LIKE 'validate_password%';
```

![查看密码规则](./%E6%9F%A5%E7%9C%8Bmysql%E5%AF%86%E7%A0%81%E8%A7%84%E5%88%99%E7%BB%93%E6%9E%9C.png)

下次进入MySQL使用（root是用户名，123456是你设置的密码）

```
mysql -uroot -p123456 
```

8、退出MySQL

```
exit；
```

# 安装 Nginx

从CentOS 8开始，Nginx软件包在默认的CentOS存储库中可用。

在CentOS 8系统中安装Nginx只需输入以下命令即可：

```
yum install nginx
```

参考：在RHEL 8/CentOS 8上安装LEMP（Nginx、MariaDB、PHP7.2）的方法。

安装完成后，使用以下命令启用并启动Nginx服务：

```
systemctl enable nginx

systemctl start nginx
```

要验证服务是否正在运行，请检查其状态：

```
systemctl status nginx
```

```
输出如下所示：

nginx.service - The nginx HTTP and reverse proxy server

Loaded: loaded (/usr/lib/systemd/system/nginx.service; enabled; vendor preset: disabled)

Active: active (running) since Sun 2019-10-06 18:35:55 UTC; 17min ago

```

调整防火墙（Firewall）

FirewallD是Centos 8中的默认防火墙解决方案。

在安装过程中，Nginx使用预定义的规则创建防火墙服务文件，以允许访问HTTP（80）和HTTPS（443）端口。

使用以下命令永久打开必要的端口：

```shell
firewall-cmd --permanent --zone=public --add-service=http

firewall-cmd --permanent --zone=public --add-service=https

firewall-cmd --reload
```

* 安装完成后的配置文件在 /etc/nginx/nginx.conf
* 前端目录 /usr/share/nginx/html

# 安装 Redis

1, 请在操作前确认gcc是否已安装，

如未安装，可以执行这个命令安装：

~~~shell
yum install gcc
~~~

2,请在操作前确认tcl是否已安装

如未安装，可以执行这个命令安装：

~~~shell
 yum install tcl
~~~

## yum方式安装

国内的话建议修改yum源为阿里云，修改方法参考： CentOS 8修改yum源为国内源；

1.添加EPEL仓库

在CentOS或Red Hat系统中，需要先添加EPEL仓库

### 添加EPEL仓库

```
yum install epel-release
```

### 更新yum源

```
yum update
```

2.安装

```
yum install redis
```

3.启动

```
systemctl start redis
```

4.设置开机自启

```
systemctl enable redis
```

5.修改配置

打开/etc/redis.conf文件。

1）允许远程连接

找到下面这一行，注释掉：

bind 127.0.0.1
改为：

~~~markdown
# bind 127.0.0.1
~~~

2）启用密码

找到# requirepass foobared一行，删除前面的#注释，然后将foobared改为你自己的密码。

~~~
requirepass your_password
~~~

6.开放端口

如果启用了防火墙，redis默认端口6379需要进行开放，开放端口参考： CentOS开放端口的方法 。​

​

~~~
firewall-cmd --add-port=6379/tcp --permanent

firewall-cmd --reload
~~~

~~~
systemctl restart redis
~~~

7.测试远程连接

telnet ip:6379
能连接说明没问题。  
[原文链接：https://blog.csdn.net/sinat_41292836/article/details/107172146](原文链接：https://blog.csdn.net/sinat_41292836/article/details/107172146)

## 上传我已经准备好的项目 并把这个 项目jar 包部署成 服务

```shell
cd /etc/systemd/system
touch MailRobot.service 
chmod 755 MailRobot.service 
vim MailRobot.service 
```

* 将下面的内容修改粘贴进去

```
[Unit]
Description=serviceName
After=syslog.target

[Service]
Type=simple
ExecStart=/usr/jdk1.8.0_162/bin/java -jar /home/service/serviceName.jar

[Install]
WantedBy=multi-user.target
```

```
[Unit]
Description=AiDialogueBot
After=syslog.target

[Service]
Type=simple 
# 这里的路径必须是绝对路径 这里的我的jdk 在 ~/ 目录下 但是不能写 ~ 要写 /root/ 否则会报错
ExecStart=~/java/jdk1.8.0_321/bin/java -jar /root/java/jar/AIDialogueBot-0.0.1-SNAPSHOT.jar --spring.profiles.active=pro

[Install]
WantedBy=multi-user.target
```

```markdown
启动服务：systemctl start serviceName
停止服务：systemctl stop serviceName
服务状态：systemctl status serviceName
项目日志：journalctl -u serviceName
开机启动：systemctl enable serviceName
注：上述命令中 serviceName 也可写为 serviceName.

```

[原文链接：https://blog.csdn.net/qq_33619502/article/details/112918309](原文链接：https://blog.csdn.net/qq_33619502/article/details/112918309)

* 设置服务开机自启动

```
systemctl enable AiDialogueBoot
```

## 查看 开启的服务

```
netstat -nltp
```

* 关闭服务开机自启动

```
systemctl disable AiDialogueBoot
```
